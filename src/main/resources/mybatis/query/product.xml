<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">


	<sql id="selectProductSql">
			cate_id       AS cateId
		,	mall_id       AS mallId
		,	prd_name      AS prdName
		,	prd_url       AS prdUrl
		,	prd_price     AS prdPrice
		,	prd_thumb_url AS prdThumbUrl
	</sql>
	
	<select id="getProductList" parameterType="product" resultType="product">
		select <include refid="selectProductSql"/>
		from tb_product
		<where>
			<if test='mallId != null'>
				mall_id = #{mallId}
			</if>
			<if test='cateId != null'>
				AND cate_id = #{cateId}
			</if>			
		</where>
	</select>
	
	<insert id="insertProduct" parameterType="product">
		insert into tb_product (
			cate_id,   pcate_id,   use_yn
		) values (
			#{cateName}, #{pcateId}, 'Y'
		)
		<selectKey keyProperty="cateId" resultType="java.lang.Integer">
			 LAST_INSERT_ID()
		</selectKey>		
	</insert>
	
</mapper>